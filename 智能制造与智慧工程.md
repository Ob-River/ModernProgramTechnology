数据、信息的采集、感知、互联  

产线布局，其实就是代码跳动  
  
一个工厂的机器摆放，是一门大学问。它需要从工厂层次的全局，来思考业务逻辑、物流及生产工艺。用户借助厂房布局或者生产规划软件，可以对各级工序的材料流进行建模，从而实现厂房级的优化。而在当下时刻，也会针对全球的网络化分布的生产设施寻找最佳的生产制造策略。  
  
这里需要对工厂进行大工艺的设计，包括机器产线的布置、大门的设置、物流的进出通道、线边库的布局等。当然，也包括对人进出的设计。而一台台机器、穿梭补料的运输设备等布局，跟整个生产线的工艺路线有着密切的关系。  
  
同样一台注塑机器，放在不同的厂房，甚至进入不同的车间，它的布局方式会发生完全不同的变化。更重要的是，规划师需要对各种工艺、装配规划等进行模拟仿真验证，模拟整个生产制造过程，在投入生产前就得到验证结果，并生成清单报表和指令等。  
  
这种产线的工艺仿真，显然需要对机器本身有着更好的认知和数据来源。在上个世纪末，如以色列的Technomatix、美国Deneb Robotics等许多专业的仿真公司进入视野。而汽车行业，则对此厚爱有加，纷纷采用，这大大促进了这类数字化产线工艺仿真软件的发展。由于机器的数据，需要来自前面的机器设计数据，这使得设计机械的CAD厂商很快意识到这是一块不可丢失的阵地，于是传统的机械设计CAD厂商纷纷进入。前面提到的两个厂家也分别被收购。CAD厂商，也借此离开了原先的设计部门的边界，开始在生产车间和厂房之间逡巡。  
  
非常有意思的事情是人员流动的仿真，例如Anylogic仿真软件。这家面向行人仿真的公司值得留存，因为终于在工业领域可以看到一家来自俄罗斯的软件。它可以实现系统动力学、离散事件、智能体的建模仿真。它广泛用于机场、博物馆、地铁等人流密集的地方，这些都需要深刻了解人的行为模型。人的行走会受到自激励机制的影响，比如总想超越前面的人等。这听上去简单，而工厂现场的事情，则要复杂得多。  
  
复杂产品的订单突然增加，往往是苦恼人的蜜糖。例如飞机的增产，就是一个复杂的过程，因为它需要重新评估产线的影响。由于产量低，许多工作单元一般都是定制化，部件生产又都在不同地域，抗干扰的能力其实是很差的。这些因素，会导致扩产的时候，反而使得飞机生产周期增加。  
  
为了应对这种变化，欧盟发起了“自适应生产管理项目”，着重增加飞机和造船行业的新产品持续增长的能力。空客也加入其中。A350在汉堡的装配流水线（行业内俗称脉动生产线），会完成对机身两个不同部位的装配。它包含6个装配站，每站包括30~35个员工和约300条的工作指令。这个产线的生产力会随时间推移而增长，整个增产周期持续两年。在这里，每个工作站，都被看成是一个智能体。那么这个过程如何进行仿真，如何修正人员的操作、事件指令的下发，以适应增产带来的变化？  
  
作为自适应生产管理的一部分，必须有仿真软件，使得参与者能够再现真实的生产环境。AnyLogic凭借它基于智能体及离散事件的混合建模优势而成功入选。而实际上，它也有很多排产、在制品策略管理等软件。现场会有很多古怪的场景和工艺需求，于是就会有想不到的软件来迎合需要。  
  
除了Anylogic之外，其它人员仿真软件包括STEP，也有来自英国的MassMotion。值得一提的是，后者参与了北京大兴机场的客流仿真，这个机场每年要为4500万人次提供服务。人员流动与紧急疏散，是必须要考虑的问题。  
  
与此同时，物料流动也需要仿真。在精益体系中，物料是最有讲究的一个环节。物料的位置、存量，背后都有着深刻的效率密码。可以说，物料是浪费程度最扎眼的刻度尺。一个工厂内的物流，往往会通过仓储物流软件WMS，跟立体库、运货小车、叉车、托盘等物料设备，进行交互吞吐。原材料、半成品、零部件、在制品等进行空间大挪移的时候，背后是一套严格的生产计划信息流所主宰。  
  
那么，这套每天奔腾不息的物品洪流，最早是如何从设想变成事实？  
  
一个企业的物流设计，往往可以通过业主邀请专业的物流咨询公司，也可以由设计院负责。各种物料的设计核心，其实是对离散事件的仿真，最常用的是Automod软件，也有美国Flexsim软件和ProModel等。Flexsim在大型仓储物流方面（如京东的立体库房）等得到广泛使用，在一些相对简单的工厂，也有不少应用，使用方便。而大的装备制造业，也表现了对软件的偏爱。  
  
很难想象，Automod这个物流仿真软件，其实是美国最大的半导体设备制造商应材旗下的软件。早在2006年应材就以1.25亿美元的代价，从一家自动化公司手中购买了此物流仿真公司，以便加速对半导体行业的柔性生产力的支撑，避免昂贵和高度定制化的产线方案。设备制造商旗下拥有商业软件并不奇怪，三井造船厂也自己开发了一款类似的物流仿真软件。这也算是一个日本软件发展特色，在垂直领域，总是会有意外的专业软件。  
  
  
当然，专业的大型工业软件公司也会提供物流系统仿真分析工具，例如达索Delmia Quest和西门子的Plant Simulation、KUKA Visual Components。Quest作为一款物流仿真软件是在2000年达索系统收购Deneb公司的时候，顺便获得的嫁妆之一。西门子的Plant Simulation也是同样的故事。它旗下的UG在收购Technomatix的时候，带来的eM-Plant经过进化而形成 。  
  
对自动化供应商而言，需要将自动化与机器更加紧密地结合在一起，因此会有更大的积极性推动这种软件与自动化系统的融合。这就是为什么早在2000年，罗克韦尔收购了以建模仿真为特长的Arena软件，55名员工并入到罗克韦尔自动化公司软件部门，并一直保留至今。  
  
现在想起来，二十一世纪刚刚开始的第一个年头，发生了三起不太显著的并购事件（应该还有更多），都跟工厂产线仿真有关系。这表明，物流仿真系统在世纪之初，就坚定地成为了数字化产线的一部分。从那个时候，自动化跟软件的关系，开始变得紧密起来。这种萌芽发节的微弱之声，在十五年之后借助于德国工业4.0的全球化普及，而终于砰然作响，每个工厂都能听到它的声音。  
  
如果有的规划师是人因工程的爱好者，需要将工位设计得更复合人性，减少疲劳感。不妨还可以使用一家德国公司的小软件——Ergonomic软件进行工位评测。  
  
从实施角度而言，机器产线布局需要跟另外一门博大精深的厂房内管理学：工业工程相结合。多年来，作为自动化与工业工程相结合的一粒硕果，产线的优化布局，已经发育成熟，基本成为标配。然而包括物联网在内的数字化技术的发展，这种机器、工位、物料、人员的布局与仿真，又有了更加有力的工具。数字工厂的先行者，想做的事情实在是太多了。  
  
工业软件就像是不慌不忙的光线，从厂房的天花板爬下来，淌过一条条产线，伴随着立体库中物料的流动，弥漫了整个工厂。而当厂房与产线完成建模之后，就可以进入到机器仿真调试的环节。  
  
机器调试，能否再快一点  
  
机器被运进厂房的时候，就像是一曲在数字空间早已编排好的旋律，每一台机器就像音符一样，只需要安置在五线谱的对应位置就可以了。每个小段落之前，是弱音P还是强音F早已经被作曲家精心打磨过。落地生根之后，演奏家们需要开始拿出自己的乐器进行合奏的尝试。  
  
这是一个现场机器调试的时刻，包括自动化、电气、机械装置需要开始磨合。各种组态，机器联调，直到让整个产线上的机器，联动咆哮起来开始。然而，工厂的机器调试，远不是乐章演奏那么令人愉快。恰好相反，这是一个耗费心力的苦差事。多少优秀的工程人员，在这里留下成吨的汗水。许多似乎打不开的死结，成为现场工程师的梦魇之一。  
  
如何让现场的调试可以变得更短？最理想的方法是，一条产线、一台机器，就像是一个USB插盘一样，下载即可使用。这种理想的插拔式工厂，成为产线模拟仿真的最高境界。要做到这一点，就要在前面的产线布局的时候，同时加入各种设备的具体参数，对实时场景进行仿真模拟。它将控制系统PLC，或者一个线缆的铭牌参数，都做成边界条件，输入到仿真系统。  
  
一言以蔽之，产线，就像产品一样，被精密地进行设计。这是传统自动化厂商陌生的环境。而作为机器的控制系统与连接者，和物料的驱动者，自动化期望更往前走一步。数字化时代，加剧了这种倾向。在数字化时代，如果没有这种产线仿真技术，那么就会瘸一条腿。  
  
西门子在2006年收购了UG这样的PLM厂商之后，就先天性地拥有了产线布局的仿真优势，然后进一步延伸到机器虚拟调式。这使得其它自动化厂商的压力非常大，尤其是像罗克韦尔这样体量相对小的自动化公司。  
  
在最近3年，罗克韦尔有两步布局值得关注。  
  
第一步是投资10亿美元入股PTC，几乎相当于PTC的年产值，换取一个战略绑定。加强对机器设备的物联网连接能力，也是加强跟其它机器数据的连接；第二步，则在2019年初，收购一家从事数字模拟的工程软件开发商Emulate3D。这种并购的投入并不大，但对机器进入数字空间意味深长。该软件可以建立简单的工厂模型，但其重点是可以跟控制系统进行连接，实现虚拟控制。  
  
也就是说，它虽然不能做工艺仿真，但可以做基于控制的仿真。Emulate3D作为一种PLC仿真程序，这正是罗克韦尔自动化需要补充的短板，可以为PLC和其它控制系统建立起虚拟调试的仿真空间，查看程序逻辑和结果。有意思的是，这家公司本来就是罗克韦尔的合作伙伴。张口吃掉小伙伴，在软件生态领域太普遍了。这种近亲联姻也是水到渠成的事情。  
  
也有一些独立厂商，如Industrial Physics，一方面可以直接导入CAD模型，同时也可以虚拟测试PLC，形成PLC的数字孪生。这样的公司能够独立多久也是打一个问号。很快也许就会被自动化公司一口吃掉。  
  
而最后虚拟调试的结果将作为真实的代码，直接下放到控制器。现场的调试时间，都会大幅度缩短。这意味着，自动化厂商，通过扩充控制器仿真软件，进入到了数字化产线。这也是每一台机器数字孪生得以发展的重要基础。缺乏有效的控制手段，数字孪生就是一个连吊线都没有的木偶。  


四川一家焊接装备工程公司，为汽车车身提供自动化焊装线。它在欧洲汽车厂的一个产线项目，实现了全面数字化产线虚拟调试。在中调试和远程安装指导，设备直接运输到厂区并实现一次调试成功，大大缩短了调试时间。产线的数字孪生，有了越来越坚实的基础。  
  
而在流程行业，这种虚拟调试则是非常普遍。例如施耐德电气AVEVA基于DYNSIM为内核的虚拟调试与操作员培训系统（OTS），就是在设计阶段，对分布式控制系统DCS进行参数调校。调好后的参数可以直接下发到DCS系统里面。  
  
实际上，这样一个软件，分演多种角色，它最重要的工作就是动态工艺仿真，对温度、流量变化等动态过程进行提前仿真。而此技术作为仿真培训的计算内核引擎，发展出来的操作员培训系统OTS也广受欢迎。当年DCS出现之后，为了适应这种控制系统，就需要对人员提前进行培训。因此OTS也是大行其道。而OTS的出现，也推动了化工过程动态模拟软件的发展。  

